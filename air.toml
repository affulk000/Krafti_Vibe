# Air configuration for hot reloading - Krafti Vibe API
# See https://github.com/cosmtrek/air for more configuration options

root = "."
testdata_dir = "testdata"
tmp_dir = "tmp"

[build]
  # Array of commands to run before each build
  pre_cmd = []

  # Build command - compiles the application
  cmd = "go build -o ./tmp/main ./cmd/api"

  # Array of commands to run after ^C
  post_cmd = []

  # Binary file yields from `cmd`
  bin = "tmp/main"

  # Customize binary with environment variables
  # Set to development mode for hot reload
  full_bin = "ENV=development ./tmp/main"

  # Watch these filename extensions
  include_ext = ["go", "tpl", "tmpl", "html", "env"]

  # Ignore these directories
  exclude_dir = [
    "assets",
    "tmp",
    "vendor",
    "testdata",
    "bin",
    "docs",
    "scripts",
    "migrations",
    "backups",
    ".git",
    ".github",
    "node_modules",
    "coverage"
  ]

  # Watch these directories if you specified
  include_dir = []

  # Watch these files
  include_file = []

  # Exclude files
  exclude_file = []

  # Exclude specific regular expressions
  exclude_regex = ["_test\\.go"]

  # Exclude unchanged files
  exclude_unchanged = true

  # Follow symbolic links for directories
  follow_symlink = true

  # Log file location in tmp_dir
  log = "air.log"

  # Poll files for changes instead of using fsnotify
  # Useful for Docker environments or network drives
  poll = false

  # Poll interval (defaults to minimum 500ms)
  poll_interval = 500 # ms

  # Delay before triggering build (prevent rapid rebuilds)
  delay = 1000 # ms

  # Stop running old binary when build errors occur
  stop_on_error = true

  # Send Interrupt signal before killing process
  # Windows does not support this feature
  send_interrupt = true

  # Delay after sending Interrupt signal
  kill_delay = 500 # ms

  # Rerun binary or not
  rerun = false

  # Delay after each execution
  rerun_delay = 500

  # Additional arguments when running binary
  # Example: args_bin = ["--port", "8080"]
  args_bin = []

[log]
  # Show log time
  time = true

  # Only show main log (silences watcher, build, runner)
  main_only = false

[color]
  # Customize each part's color
  main = "magenta"
  watcher = "cyan"
  build = "yellow"
  runner = "green"

[misc]
  # Delete tmp directory on exit
  clean_on_exit = true

[screen]
  # Clear screen on rebuild for cleaner output
  clear_on_rebuild = true

  # Keep scroll position
  keep_scroll = true
